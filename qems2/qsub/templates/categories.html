{% extends "base.html" %}

{% block header %}
{% include "header.html" %}
{% endblock %}

{% block sidebar %}
{% include "sidebar.html" %}
{% endblock %}

{% block content %}
{% load static %}
{% load filters %}
{% load comments %}

<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
    <div class="alert alert-info" style="text-align: center;"><strong>Questions in Category</strong></div>
    <h2 class="page-header">View Category - {{ category }} - {{ message }}</h2>
		<table class="table table-striped table-hover tablesorter" id="category-tossup-table">
			<thead>
			<tr>
				<th>Author</th>
				<th>Text</th>
				<th>Answer</th>
				<th>Question Type</th>
				<th>Category</th>
				<th>Packet</th>
				<th>Actions</th>
				<th>Comments</th>
			</tr>
			</thead>
			<tbody>
            {% autoescape off %}
                {% for tossup in tossups %}
                <tr>
                    <td>{{ tossup.author }}</td>
                    <td>{{ tossup.tossup_text|safe|preview|question_html }}</td>
                    <td>{{ tossup.tossup_answer|safe|preview|answer_html }}</td>
                    <td>Tossup</td>
                    <td>{{ tossup.category }}</td>
                    <td>{% if tossup.packet %} {{ tossup.packet }} {% else %} Not in packet {% endif %}</td>
                    <td>
                        <a href="/edit_tossup/{{ tossup.id }}" rel="tooltip" title="Edit tossup">
                            <i class="fa fa-edit"></i>
                        </a>
                        <a href="/delete_tossup/{{ tossup.id }}" rel="tooltip" title="Delete tossup" class="delete_tossup" value="{{ tossup.id }}">
                            <i class="fa fa-minus-circle"></i>
                        </a>
                    </td>
                    <td>
                    {% get_comment_list for tossup as comment_list %}
                    {% for comment in comment_list %}
                        {% if not comment.is_removed %}
                            {{user}}: {{ comment.comment|preview|comment_html }}<br>
                        {% endif %}
                    {% endfor %}
                    </td>
                </tr>
                {% endfor %}
            {% endautoescape %}
            </tbody>
        </table>
		<table class="table table-striped table-hover tablesorter" id="category-bonus-table">
			<thead>
			<tr>
				<th>Author</th>
				<th>Text</th>
				<th>Answer</th>
				<th>Question Type</th>
				<th>Category</th>
				<th>Packet</th>
				<th>Actions</th>
				<th>Comments</th>
			</tr>
			</thead>
            {% autoescape off %}
                {% for bonus in bonuses %}
                <tr>
                    <td>{{ bonus.author }}</td>
                    <td>{{ bonus.leadin|safe|preview|question_html }}</td>
                    <td>{{ bonus|bonus_answers }}</td>
                    <td>Bonus</td>
                    <td>{{ bonus.category }}</td>
                    <td>{% if bonus.packet %} {{ bonus.packet }} {% else %} Not in packet {% endif %}</td>
                    <td>
                        <a href="/edit_bonus/{{ bonus.id }}" rel="tooltip" title="Edit tossup">
                            <i class="fa fa-edit"></i>
                        </a>
                        <a href="/delete_bonus/{{ bonus.id }}" rel="tooltip" title="Delete bonus" class="delete_bonus" value="{{ bonus.id }}">
                            <i class="fa fa-minus-circle"></i>
                        </a>
                    </td>
                    <td>
                    {% get_comment_list for bonus as comment_list %}
                    {% for comment in comment_list %}
                        {% if not comment.is_removed %}
                            {{user}}: {{ comment.comment|preview|comment_html }}<br>
                        {% endif %}
                    {% endfor %}
                    </td>
                </tr>
                {% endfor %}
            {% endautoescape %}
			</tbody>
		</table>
	</div>
</div>

{% endblock %}
